<!DOCTYPE html>
<html>
<head>
    <title>XSS Playground</title>
    <style>
        * {margin: 0; padding: 0; box-sizing: border-box;}
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        header {
            font-size: 2.5em;
            font-weight: bold;
            margin: 20px 0 40px;
            background: linear-gradient(90deg, #ff9966, #ff5e62);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        main {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
            max-width: 1200px;
        }
        .card {
            background: rgba(255, 255, 255, 0.07);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(12px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            animation: fadeIn 0.5s ease-in-out;
        }
        h2 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #ffcc70;
        }
        .input-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        input[type=text] {
            flex: 1;
            padding: 10px 14px;
            border-radius: 8px;
            border: none;
            outline: none;
            font-size: 14px;
        }
        button {
            background: linear-gradient(90deg, #ff9966, #ff5e62);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: transform 0.1s ease;
        }
        button:hover {transform: scale(1.05);}
        .box {
            min-height: 50px;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            overflow-wrap: break-word;
        }
        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(10px);}
            to {opacity: 1; transform: translateY(0);}
        }
        @media (max-width: 900px) {
            main {grid-template-columns: 1fr;}
        }
    </style>
</head>
<body>
<header>XSS Playground</header>
<main id="cards"></main>
<script>
const challenges = [
 "Instant XSS #1","Instant XSS #2","Instant XSS #3",
 "Button XSS #4","Button XSS #5","Button XSS #6",
 "Param XSS #7","Button XSS #8","Delayed XSS #9","Eval XSS #10",
 "Attribute Injection XSS #11","Template Literal XSS #12","Iframe Srcdoc XSS #13","Base64 Decode XSS #14","DOM Fragment XSS #15",
 "Event Handler XSS #16","Canvas Exec XSS #17","History API XSS #18","LocalStorage XSS #19","JSON Parse XSS #20",
 "DOM Clobbering XSS #21","MutationObserver XSS #22","Service Worker XSS #23","WebSocket Echo XSS #24","PostMessage XSS #25",
 "innerHTML Chain XSS #26","Dynamic Script XSS #27","setTimeout Code XSS #28","Shadow DOM XSS #29","Trusted Types Bypass XSS #30"
];
const main = document.getElementById("cards");
challenges.forEach((t,i)=>{
  const n=i+1;
  const card=document.createElement("div"); card.className="card";
  const h=document.createElement("h2"); h.textContent=t; card.appendChild(h);
  const needInput=[4,5,6,8,11,12,13,14,15,16,17,18,19,20,21,22,24,25,26,27,28,29,30];
  if(needInput.includes(n)){
    const row=document.createElement("div"); row.className="input-row";
    const input=document.createElement("input"); input.type="text"; input.id=`input${n}`;
    const btn=document.createElement("button"); btn.textContent="Run"; btn.onclick=()=>runXSS(n);
    row.appendChild(input); row.appendChild(btn); card.appendChild(row);
  }
  const box=document.createElement("div"); box.className="box"; box.id=`box${n}`;
  if(n===9) box.textContent="Wait 2s...";
  if(n===10) box.textContent="Pass `code` param in URL";
  card.appendChild(box);
  main.appendChild(card);
});
const params=new URLSearchParams(location.search);
function runXSS(id){
  const v=(document.getElementById(`input${id}`)||{}).value||"";
  switch(id){
    case 4: document.getElementById("box4").innerHTML=v; break;
    case 5: document.getElementById("box5").innerHTML=v.replace(/</g,"&lt;").replace(/>/g,"&gt;"); break;
    case 6: document.getElementById("box6").innerHTML=`Profile: ${v}`; break;
    case 8: document.getElementById("box8").innerHTML=`<div onclick="${v}">Click product</div>`; break;
    case 11: document.getElementById("box11").innerHTML=`<img src=x ${v}>`; break;
    case 12: try{ document.getElementById("box12").innerHTML=eval('`'+v+'`'); }catch(e){document.getElementById("box12").textContent="Error"} break;
    case 13: document.getElementById("box13").innerHTML=`<iframe srcdoc="${v}"></iframe>`; break;
    case 14: try{ document.getElementById("box14").innerHTML=atob(v); }catch(e){document.getElementById("box14").textContent="Invalid"} break;
    case 15: location.hash=encodeURIComponent(v); document.getElementById("box15").textContent=decodeURIComponent(location.hash.slice(1)); break;
    case 16: document.getElementById("box16").innerHTML=`<div ${v}>Click me</div>`; break;
    case 17: try{ const c=document.createElement('canvas'); c.onclick=new Function(v); document.getElementById("box17").appendChild(c);}catch(e){document.getElementById("box17").textContent="Error"} break;
    case 18: try{ history.pushState({},'',v); }catch(e){} document.getElementById("box18").textContent=location.href; break;
    case 19: try{ localStorage.setItem('xss19',v); document.getElementById("box19").textContent=localStorage.getItem('xss19'); }catch(e){document.getElementById("box19").textContent="Error"} break;
    case 20: try{ const o=JSON.parse(v); document.getElementById("box20").innerHTML=o.data; }catch(e){document.getElementById("box20").textContent="Invalid JSON"} break;
    case 21: try{ document.getElementById("box21").outerHTML=v; }catch(e){document.getElementById("box21").textContent="Error"} break;
    case 22: try{ const t=document.getElementById("box22"); const mo=new MutationObserver(()=>{ try{ eval(v) }catch(e){} }); mo.observe(t,{childList:true,subtree:true}); t.innerHTML="changed"; }catch(e){document.getElementById("box22").textContent="Error"} break;
    case 24: try{ const ws=new WebSocket(v); ws.onmessage=(e)=>{document.getElementById("box24").innerHTML=e.data}; ws.onopen=()=>ws.send("ping"); }catch(e){document.getElementById("box24").textContent="Error"} break;
    case 25: try{ const f=document.createElement('iframe'); f.style.display='none'; document.body.appendChild(f); window.addEventListener('message',e=>{document.getElementById("box25").innerHTML=e.data}); f.contentWindow.postMessage(v,"*"); }catch(e){document.getElementById("box25").textContent="Error"} break;
    case 26: document.getElementById("box26").innerHTML=`<div>${v}</div>`; break;
    case 27: try{ const s=document.createElement('script'); s.textContent=v; document.getElementById("box27").appendChild(s); }catch(e){document.getElementById("box27").textContent="Error"} break;
    case 28: try{ setTimeout(new Function(v),1000); }catch(e){document.getElementById("box28").textContent="Error"} break;
    case 29: try{ const host=document.getElementById("box29"); const sh=host.attachShadow({mode:'open'}); sh.innerHTML=v; }catch(e){document.getElementById("box29").textContent="Error"} break;
    case 30: document.getElementById("box30").innerHTML=v; break;
    default: document.getElementById(`box${id}`).innerHTML=v; break;
  }
}
if(params.get("x1")) document.getElementById("box1").innerHTML=params.get("x1");
if(params.get("x2")) document.getElementById("box2").innerHTML=params.get("x2");
if(params.get("x3")) document.getElementById("box3").innerHTML=params.get("x3");
if(params.get("showme")) document.getElementById("box7").innerHTML=params.get("showme");
if(params.get("x4")) setTimeout(()=>{document.getElementById("box9").innerHTML=params.get("x4")},2000);
if(params.get("code")) try{ new Function(params.get("code"))(); }catch(e){}
if(params.get("b64")) try{ document.getElementById("box14").innerHTML=atob(params.get("b64")); }catch(e){}
if(params.get("frag")) document.getElementById("box15").textContent=decodeURIComponent(params.get("frag"));
if(params.get("json")) try{ const o=JSON.parse(params.get("json")); if(o.data) document.getElementById("box20").innerHTML=o.data }catch(e){}
if(params.get("st")) try{ setTimeout(new Function(params.get("st")),1000) }catch(e){}
if(params.get("dyn")) try{ const s=document.createElement('script'); s.textContent=params.get("dyn"); document.getElementById("box27").appendChild(s) }catch(e){}
if(params.get("chain")) document.getElementById("box26").innerHTML=`<div>${params.get("chain")}</div>`;
if(params.get("enc")) try{ document.getElementById("box11").innerHTML=`<img src=x ${decodeURIComponent(params.get("enc"))}>` }catch(e){}
if(params.get("tmpl")) document.getElementById("box12").innerHTML=eval('`'+params.get("tmpl")+'`');
if(params.get("iframe")) document.getElementById("box13").innerHTML=`<iframe srcdoc="${params.get("iframe")}"></iframe>`;
if(params.get("dom")) try{ document.getElementById("box21").outerHTML=params.get("dom") }catch(e){}
if(params.get("mo")) try{ const t=document.getElementById("box22"); const obs=new MutationObserver(()=>{ try{ eval(params.get("mo")) }catch(e){} }); obs.observe(t,{childList:true}); t.innerHTML="change" }catch(e){}
if(params.get("pm")) try{ const f=document.createElement('iframe'); f.style.display='none'; document.body.appendChild(f); window.addEventListener('message',e=>{document.getElementById("box25").innerHTML=e.data}); f.contentWindow.postMessage(params.get("pm"),"*") }catch(e){}
</script>
</body>
</html>
